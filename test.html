<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;!-- saved from url=(0045)http://dongshaohan.github.io/test/jd2015.html --&amp;gt;


前端面试题






	*{padding: 0;margin:0;}
	html, body{width: 100%;overflow-x: hidden;font-size: 14px;}
	.main{w">
<meta property="og:type" content="website">
<meta property="og:title" content="Qmore's Blog">
<meta property="og:url" content="http://blog.dqmore.com/test.html">
<meta property="og:site_name" content="Qmore's Blog">
<meta property="og:description" content="&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;!-- saved from url=(0045)http://dongshaohan.github.io/test/jd2015.html --&amp;gt;


前端面试题






	*{padding: 0;margin:0;}
	html, body{width: 100%;overflow-x: hidden;font-size: 14px;}
	.main{w">
<meta property="og:updated_time" content="2015-10-23T01:52:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Qmore's Blog">
<meta name="twitter:description" content="&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;!-- saved from url=(0045)http://dongshaohan.github.io/test/jd2015.html --&amp;gt;


前端面试题






	*{padding: 0;margin:0;}
	html, body{width: 100%;overflow-x: hidden;font-size: 14px;}
	.main{w">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title>
  

  
     | Qmore's Blog
  
</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Qmore's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'MgxJo6ih2JJYnzUU98EH','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    
    
      <!DOCTYPE html>
<!-- saved from url=(0045)http://dongshaohan.github.io/test/jd2015.html -->
<html lang="zh-cmn-Hans"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>前端面试题</title>
<meta name="renderer" content="webkit">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<style type="text/css">
	*{padding: 0;margin:0;}
	html, body{width: 100%;overflow-x: hidden;font-size: 14px;}
	.main{width: 90%;margin:5% auto;}
	h1{font-size:20px; line-height: 1.5;}
	h2{font-size:16px; line-height: 1.5;}
	pre{margin:10px 0 20px;padding: 10px;background-color: #ccc;white-space: pre-wrap;word-wrap: break-word;}
	.codeTips{color: #999;}
</style></head>

<body>
<div class="main">
<h2>实现一个通用的事件绑定函数，addEvent(dom,type,handler)</h2>
<pre>function addEvent (dom, type, handler) {
	if ( document.addEventListener ) {
		dom.addEventListener(type, handler);
	} else if ( document.attachEvent ) {
		dom.attachEvent('on' + type, handler);
	} else {
		dom['on' + type] = handler;
	}
}
</pre>
<h2>不使用全局变量，使用闭包写一个函数，实现返回从1渐进增加的数值，比如第一次调用返回1，第二次返回2，第三次返回3，……</h2>
<pre>function a () {
	var i = 0

	function b () {
		i++;
		console.log(i);		
	}

	return b;
};

var c = a();
c(); // 1
c(); // 2
c(); // 3
...
</pre>
<h2>实现一个对象拷贝函数 extend(target,source,isDeep)</h2>
<pre>function extend (target, source, isDeep) {
	var src, copy, copyIsArray,
		options = source,
		length = arguments.length,
		isDeep = isDeep || false;

	if ( length &lt; 2 || obj == null ) return false;
	if ( typeof target !== "object" || target == null ) return false;
	if ( typeof source !== "object" || source == null ) return false;
	
	for ( name in options ) {
		src = target[ name ];
		copy = options[ name ];

		if ( target === copy ) {
			continue;
		}

		if ( isDeep &amp;&amp; copy &amp;&amp; (typeof copy === "object" || (copyIsArray = Array.isArray(copy)) ) ) {
			if ( copyIsArray ) {
				copyIsArray = false;
				clone = src &amp;&amp; Array.isArray(src) ? src : [];
			} else {
				clone = src &amp;&amp; typeof src === "object" ? src : {};
			}

			target[ name ] = extend(clone, copy, isDeep);
		} else {
			target[ name ] = copy;
		}
	}

	return target;
}
</pre>
<h2>下面一段代码：</h2>
<pre>var name ="Bill Gates";
var aFamousPerson = {
	name:"Steve Jobs",
	friend:{
		name:"Mark Zerkerberg",
		showMyName:function(){
			console.log(this.name);
		}
	}
}

代码怎么写，可以依次显示Bill Gates、Steve Jobs、Mark Zerkerberg

作答：

show = aFamousPerson.friend.showMyName;   // this上下文对象是window，等同于show = function () { console.log (this.name)},
// 此时的show是全局函数
show(); //Bill Gates

aFamousPerson.show = aFamousPerson.friend.showMyName;  //Steve Jobs
aFamousPerson.show();

aFamousPerson.friend.showMyName(); //Mark Zerkerberg this 上下文对象是aFamouPerson 
</pre>
<h2>输入一个url到页面加载完，发生了什么？谈谈你的理解</h2>
<pre>1、DNS会进行查询与解析，
2、http连接，tcp三次握手
3、服务器端响应cgi程序业务处理（数据库io查询，数据处理等），
4、返回数据，客户端加载资源
</pre>

<h2>一个页面被投诉很慢，要你给出优化方案（措施）</h2>
<pre>前端：
	1、优化客户端DOM文档、js代码、精简css(CSS Compressor)。
	2、合并资源，减少HTTP请求数量（css精灵合并多图为一个图片，grunt合并）。
	3、多请求进行长连接处理。
	4、使用浏览器缓存，缓存少改动文件等。
	5、脚本位置置放底部，加快文档加载数据，减少用户等待。
	6、外部CSS、js，压缩代码
	7、使用常规CDN、图床服务器、文件服务器等，如七牛
后端：
	优化数据库，减少大sql锁死几率、减少join操作、适当读写分离、缓存
	redis+msql结合，redis进行用户操作保存，通过消息队列来将数据同步到msql中，当然会有数据同步延迟等问题，具体看业务性质。

一、尽量减少 HTTP 请求
有几种常见的方法能切实减少 HTTP 请求：
1、 合并脚本跟样式文件，如可以把多个 CSS 文件合成一个，把多个 JS 文件合成一个。
2、 CSS Sprites 利用 CSS background 相关元素进行背景图绝对定位,把多个图片合成一个图片

二、使用浏览器缓存
在用户浏览网站的不同页面时，很多内容是重复的，比如相同的JS、CSS、图片等。
如果我们能够建议甚至强制浏览器在本地缓存这些文件，将大大降低页面产生的流量，从而降低页面载入时间。
根据服务器端的响应header，一个文件对浏览器而言，有几级不同的缓存状态。

1、服务器端告诉浏览器不要缓存此文件，每次都到服务器上更新文件。
2、服务器端没有给浏览器任何指示。
3、在上次传输中，服务器给浏览器发送了Last-Modified或Etag数据，再次浏览时浏览器将提交这些数据到服务器，验证本地版本是否最新的，
如果为最新的则服务器返回304代码，告诉浏览器直接使用本地版本，否则下载新版本。一般来说，有且只有静态文件，服务器端才会给出这些数据。
4、服务器强制要求浏览器缓存文件，并设置了过期时间。在缓存未到期之前，浏览器将直接使用本地缓存文件，不会与服务器端产生任何通信。

我们要做的是尽量强制浏览器到第四种状态，特别是对于JS、CSS、图片等变动较少的文件。

三、将脚本放在底部
脚本放在顶部带来的问题，

1、使用脚本时，对于位于脚本以下的内容，逐步呈现将被阻塞
2、在下载脚本时会阻塞并行下载

放在底部可能会出现JS错误问题，当脚本没加载进来，用户就触发脚本事件。
要综合考虑情况。

四、将样式文件放在页面顶部
如果样式表任在加载，构建呈现树就是一种浪费，样式文件放在页面底部可能会出现两种情况：
1、白屏
2、无样式内容的闪烁

五、使用外部的JS和CSS
将内联的JS和CSS做成外部的JS、CSS。减少重复下载内联的JS和CSS。

六、精简JS
可以做到两个级别

1、精简：从代码中移除不必要的字符以减少其大小，
2、混淆：在精简的同时，还会改写代码，函数、变量名被转换成更短的字符串

可以使用ShrinkSafe来精简JS  http://shrinksafe.dojotoolkit.org/

七、精简CSS

从代码中移除不必要的字符以减少其大小，
可以使用CSS Compressor http://www.cssdrive.com/index.php/main/csscompressor /
</pre>

<h2>h5新技术</h2>
<pre>canvas webSocket webStorage video audio WebGL 地理位置 SVG 离线Web应用等等
</pre>

<h2>有10万 cdkey号码（数字，字母组成的序列号，每个序列号可兑换一定的物品，比如购物券等），给出发放cdkey的一个方案：</h2>
<p>1)用户登录后领取，每人一张</p>
<p>用户量并发比较大的时候，不允许出现一个cdkey发放给多人的情况</p>
<p>给出价格设计并解释主要步骤流程</p>
<pre>CAP理论：
Consistency:一致性,数据一致,同步
Availability:可用性
Partition tolerance:分区容错性

BASE理论：
Basically Available:基本可用
Soft-state:软状态／柔性事物
Eventual Consistency:最终一致性

CAP理论会更合理一些

客户端：
    抽取概率，减少并发压力
    抽取成功后，延迟发放cdkey，如提示抽取成功，由于现在人数过多，cdkey将稍后发放。
服务端：
    限制同一账号并发数量、验证码、ip限制、黑名单
    同时后端采用异步分拆，接收到用户请求时仅进行合法性验证，验证完成后直接告知成功，后续业务逻辑进入异步队列进行处理，减少了用户的等待时间
    预先保存10w数据到redis中，redis+msql结合，redis进行用户抽奖操作，其原子性保证数据稳定，抽取一个将改数置换为1，通过消息队列来将数据同步到msql中，当然会有数据同步延迟等问题，具体看业务性质。

</pre>

<h2>编写函数trim()，用于去除字符串左右的空格，可如下调用：<br>"  ab cd e   ".trim();</h2>
<pre>String.prototype.trim = function () {  
    return this.replace(/(^\s*)|(\s*$)/g, "");  
}
</pre>

<h2>li节点很大，且动态变化时，点击这些节点，弹出li节点坐标信息，节点内容</h2>
<pre>document.addEventListener('click', function (e) {
	if ( e.target.nodeName == 'LI' ) {
		 var rect = e.target.getBoundingClientRect() ;
		 console.log("X:"+ (rect.left+ rect.width / 2) +'，Y:'+ (rect.top + rect.height /2) );
		 console.log(e.target.nodeName);
	}
});
</pre>

<h2>跨域解决方案</h2>
<pre>1、跨域问题是浏览器同源策略限制，当前域名的js只能读取同域下的窗口属性。
2、
使用jsonp
服务端代理
服务端设置Request Header头中Access-Control-Allow-Origin为指定可获取数据的域名
3、
jsonp解决跨域问题的原理是，浏览器的script标签是不受同源策略限制
(你可以在你的网页中设置script的src属性问cdn服务器中静态文件的路径)。
那么就可以使用script标签从服务器获取数据，请求时添加一个参数为callbakc=?，?号时你要执行的回调方法。

服务端返回数据处理
上面说了jsonp的原理是利用script标签来解决跨域，但是script标签是用来获取js代码的，那么我们怎么获取到请求的数据呢。
这就需要服务端做一些判断，当参数中带有callback属性时，返回的type要为application/javascript,
把数据作为callback的参数执行。下面是jsonp返回的数据的格式示例
4、
服务端设置Access-Control-Allow-Origin
这种方式只要服务端把response的header头中设置
Access-Control-Allow-Origin为制定可请求当前域名下数据的域名即可。
一般情况下设为即可。这样客户端就不需要使用jsonp来获取数据。

Access-Control-Allow-Origin是html5新增的一项标准，IE10以下是不支持的，
所以如果产品面向的是PC端，就要使用服务端代理或jsonp。
</pre>


<h2>http请求类型，状态码，长链接</h2>
<pre>1、GET、POST、PUT、DELETE、OPTIONS、TARCE
2、
1开头：代表请求已被接受，需要继续处理
2开头：代表请求已成功被服务器接收、理解、并接受
3开头：要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向，后续的请求地址（重定向目标）
4开头：客户端看起来可能发生了错误，妨碍了服务器的处理。
5开头：服务器在处理请求的过程中有错误或者异常状态发生，也有可能是服务器意识到以当前的软硬件资源无法完成对请求的处理

3、 HTTP长连接，与一般每次发起http请求或响应都要建立一个tcp连接不同，
http长连接利用同一个tcp连接处理多个http请求和响应，也叫HTTP keep-alive，或者http连接重用。
使用http长连接可以提高http请求/响应的性能。
</pre>

<h2>缓存一天，服务器该如何设置</h2>
<pre>方案一：
Http Header
Expires: 设置为后一天 // 格式 Expires  Wed, 12 Oct 2016 13:18:42 GMT

方案二：
Cache-Control: private, max-age=86400 // 单位秒
</pre>

<h2>安全问题</h2>
<pre></pre>
</div>
<script type="text/javascript">

</script>

</body></html>
    
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7u2h92.com1.z0.glb.clouddn.com/avatar.jpeg" alt="Qmore" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Qmore</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">34</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">34</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhaoyong7" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1898047552/" target="_blank">weibo</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://book.douban.com/people/zhaoyong7/" target="_blank">douban</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qmore</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'qmore';
      var disqus_identifier = 'test.html';
      var disqus_title = '';
      var disqus_url = 'http://blog.dqmore.com/test.html';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>



  <script type="text/javascript" src="/js/nav-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
